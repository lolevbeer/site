name: Update Data
on:
  push:
    branches:
      - master
  schedule:
    - cron: '*/15 * * * *'

jobs:
  get-remote-doc:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
        with:
          token: ${{ github.token }}
      - name: Get Remote Document
        # continue-on-error: true
        run: |
          cd _data
          wget --no-check-certificate -O beer.csv ${{ vars.BEER_INVENTORY }} -L
          wget --no-check-certificate -O menu.csv ${{ vars.BEER_MENU }} -L
          wget --no-check-certificate -O food.csv ${{ vars.FOOD_SCHEDULE }} -L
          wget -O music.csv ${{ secrets.MUSIC_GSHEET }}
          wget -O sales.csv ${{ secrets.SALES_GSHEET }}
          wget -O events.csv ${{ secrets.EVENTS_GSHEET }}
          wget -O coming.csv ${{ secrets.COMING_GSHEET }}
          git config --local user.email "lolevbeer@gmail.com"
          git config --local user.name "Lolev Manager"
          git add .
          git commit -m "Sync Data from google sheets"
          git push
